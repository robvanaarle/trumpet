/* Copyright (c) 2012 Synology Inc. All rights reserved. */

/*
 * Ext JS Library 3.4.0
 * Copyright(c) 2006-2011 Sencha Inc.
 * licensing@sencha.com
 * http://www.sencha.com/license
 */
Ext.ns("Ext.ux.grid");Ext.ux.grid.BufferView=Ext.extend(Ext.grid.GridView,{rowHeight:19,borderHeight:2,scrollDelay:100,cacheSize:20,cleanDelay:500,initTemplates:function(){Ext.ux.grid.BufferView.superclass.initTemplates.call(this);var a=this.templates;a.rowHolder=new Ext.Template('<div class="x-grid3-row {alt}" style="{tstyle}"></div>');a.rowHolder.disableFormats=true;a.rowHolder.compile();a.rowBody=new Ext.Template('<table class="x-grid3-row-table" border="0" cellspacing="0" cellpadding="0" style="{tstyle}">',"<tbody><tr>{cells}</tr>",(this.enableRowBody?'<tr class="x-grid3-row-body-tr" style="{bodyStyle}"><td colspan="{cols}" class="x-grid3-body-cell" tabIndex="0" hidefocus="on"><div class="x-grid3-row-body">{body}</div></td></tr>':""),"</tbody></table>");a.rowBody.disableFormats=true;a.rowBody.compile()},getStyleRowHeight:function(){return Ext.isBorderBox?(this.rowHeight+this.borderHeight):this.rowHeight},getCalculatedRowHeight:function(){return this.rowHeight+this.borderHeight},getVisibleRowCount:function(){var b=this.getCalculatedRowHeight(),a=this.scroller.dom.clientHeight;return(a<1)?0:Math.ceil(a/b)},getVisibleRows:function(){var a=this.getVisibleRowCount(),b=this.scroller.dom.scrollTop,c=(b===0?0:Math.floor(b/this.getCalculatedRowHeight())-1);return{first:Math.max(c,0),last:Math.min(c+a+2,this.ds.getCount()-1)}},doRender:function(g,k,u,a,s,B,l){var b=this.templates,f=b.cell,h=b.row,y=b.rowBody,n=s-1,t=this.getStyleRowHeight(),A=this.getVisibleRows(),d="width:"+this.getTotalWidth()+";height:"+t+"px;",E=[],x,F,w={},m={tstyle:d},q;for(var z=0,D=k.length;z<D;z++){q=k[z];x=[];var o=(z+a),e=o>=A.first&&o<=A.last;if(e){for(var C=0;C<s;C++){F=g[C];w.id=F.id;w.css=C===0?"x-grid3-cell-first ":(C==n?"x-grid3-cell-last ":"");w.attr=w.cellAttr="";w.value=F.renderer(q.data[F.name],w,q,o,C,u);w.style=F.style;if(w.value===undefined||w.value===""){w.value="&#160;"}if(q.dirty&&typeof q.modified[F.name]!=="undefined"){w.css+=" x-grid3-dirty-cell"}x[x.length]=f.apply(w)}}var G=[];if(B&&((o+1)%2===0)){G[0]="x-grid3-row-alt"}if(q.dirty){G[1]=" x-grid3-dirty-row"}m.cols=s;if(this.getRowClass){G[2]=this.getRowClass(q,o,m,u)}m.alt=G.join(" ");m.cells=x.join("");E[E.length]=!e?b.rowHolder.apply(m):(l?y.apply(m):h.apply(m))}return E.join("")},isRowRendered:function(a){var b=this.getRow(a);return b&&b.childNodes.length>0},syncScroll:function(){Ext.ux.grid.BufferView.superclass.syncScroll.apply(this,arguments);this.update()},update:function(){if(this.scrollDelay){if(!this.renderTask){this.renderTask=new Ext.util.DelayedTask(this.doUpdate,this)}this.renderTask.delay(this.scrollDelay)}else{this.doUpdate()}},onRemove:function(d,a,b,c){Ext.ux.grid.BufferView.superclass.onRemove.apply(this,arguments);if(c!==true){this.update()}},doUpdate:function(){if(this.getVisibleRowCount()>0){var f=this.grid,b=f.colModel,h=f.store,e=this.getColumnData(),a=this.getVisibleRows(),j;for(var d=a.first;d<=a.last;d++){if(!this.isRowRendered(d)&&(j=this.getRow(d))){var c=this.doRender(e,[h.getAt(d)],h,d,b.getColumnCount(),f.stripeRows,true);j.innerHTML=c}}this.clean()}},clean:function(){if(!this.cleanTask){this.cleanTask=new Ext.util.DelayedTask(this.doClean,this)}this.cleanTask.delay(this.cleanDelay)},doClean:function(){if(this.getVisibleRowCount()>0){var b=this.getVisibleRows();b.first-=this.cacheSize;b.last+=this.cacheSize;var c=0,d=this.getRows();if(b.first<=0){c=b.last+1}for(var a=this.ds.getCount();c<a;c++){if((c<b.first||c>b.last)&&d[c].innerHTML){d[c].innerHTML=""}}}},removeTask:function(b){var a=this[b];if(a&&a.cancel){a.cancel();this[b]=null}},destroy:function(){this.removeTask("cleanTask");this.removeTask("renderTask");Ext.ux.grid.BufferView.superclass.destroy.call(this)},layout:function(){Ext.ux.grid.BufferView.superclass.layout.call(this);this.update()}});Ext.override(Ext.ux.grid.BufferView,{constructor:function(a){Ext.ux.grid.BufferView.superclass.constructor.call(this,a);this.addEvents("bufferupdated")},doUpdate:function(){if(this.getVisibleRowCount()>0){var f=this.grid,b=f.colModel,h=f.store,e=this.getColumnData(),a=this.getVisibleRows(),j;for(var d=a.first;d<=a.last;d++){if(!this.isRowRendered(d)&&(j=this.getRow(d))){var c=this.doRender(e,[h.getAt(d)],h,d,b.getColumnCount(),f.stripeRows,true);j.innerHTML=c}}this.clean()}this.fireEvent("bufferupdated",this)},doClean:function(){if(this.getVisibleRowCount()>0){var b=this.getVisibleRows();b.first-=this.cacheSize;b.last+=this.cacheSize;var c=0,d=this.getRows();if(b.first<=0){c=b.last+1}for(var a=this.ds.getCount();c<a;c++){if((c<b.first||c>b.last)&&d[c]){d[c].innerHTML=""}}}}});Ext.ns("Ext.ux.grid");Ext.ux.grid.CellActions=function(a){Ext.apply(this,a);this.addEvents("action","beforeaction");Ext.ux.grid.CellActions.superclass.constructor.call(this)};Ext.extend(Ext.ux.grid.CellActions,Ext.util.Observable,{actionEvent:"click",actionWidth:20,tpl:'<div class="ux-cell-value" style="padding-left:{padding}px"><tpl if="\'left\'!==align">{value}</tpl><div class="ux-cell-actions<tpl if="\'left\'===align"> ux-cell-actions-left</tpl>" style="width:{width}px"><tpl for="actions"><div class="ux-cell-action {cls}" qtip="{qtip}" style="{style}">&#160;</div></tpl></div><tpl if="\'left\'===align">{value}</tpl></div>',userProcessing:Ext.emptyFn,init:function(b){this.grid=b;b.afterRender=b.afterRender.createSequence(this.onRenderGrid,this);var a=this.grid.getColumnModel();Ext.each(a.config,function(e,d){if("object"===typeof e.cellActions){e.origRenderer=a.getRenderer(d);e.renderer=this.renderActions.createDelegate(this)}},this)},onRenderGrid:function(){this.view=this.grid.getView();var a={scope:this};a[this.actionEvent]=this.onClick;this.view.mainBody.on(a)},getData:function(e,a,b,f,d,c){return b.data||{}},renderActions:function(g,i,e,j,b,h){var f=this.grid.getColumnModel().config[b];var a=f.origRenderer(g,i,e,j,b,h);if(f.cellActions&&!f.actionsTpl){f.actionsTpl=this.processActions(f);f.actionsTpl.compile()}else{if(!f.cellActions){return a}}var d=this.getData.apply(this,arguments);d.value=a;return f.actionsTpl.apply(d)},processActions:function(d){this.callbacks=this.callbacks||{};var b={align:this.align||"right",width:this.actionWidth*d.cellActions.length,padding:"left"===this.align?this.actionWidth*d.cellActions.length:0,value:"{value}",actions:[]};Ext.each(d.cellActions,function(c,e){if(c.iconCls&&"function"===typeof(c.callback||c.cb)){this.callbacks[c.iconCls]=c.callback||c.cb}var f={cls:c.iconIndex?"{"+c.iconIndex+"}":(c.iconCls?c.iconCls:""),qtip:c.qtipIndex?"{"+c.qtipIndex+"}":(c.tooltip||c.qtip?c.tooltip||c.qtip:""),style:c.style?c.style:""};b.actions.push(f)},this);this.userProcessing(d,b);var a=new Ext.XTemplate(this.tpl);return new Ext.Template(a.apply(b))},onClick:function(f,g){var k=f.getTarget("div.ux-cell-action");var l=f.getTarget(".x-grid3-row");var a=this.view.findCellIndex(g.parentNode.parentNode);var h=this.grid.getColumnModel().config[a];var d,i,j,b;if(k){d=this.grid.store.getAt(l.rowIndex);i=h.dataIndex;j=d.get(i);b=k.className.replace(/ux-cell-action /,"")}if(false!==l&&false!==a&&d&&i&&b){if(this.callbacks&&"function"===typeof this.callbacks[b]){this.callbacks[b](this.grid,d,b,j,i,l.rowIndex,a)}if(true!==this.eventsSuspended&&false===this.fireEvent("beforeaction",this.grid,d,b,j,i,l.rowIndex,a)){return}else{if(true!==this.eventsSuspended){this.fireEvent("action",this.grid,d,b,j,i,l.rowIndex,a)}}}}});Ext.reg("cellactions",Ext.ux.grid.CellActions);
/*
 * Ext JS Library 3.2.1
 * Copyright(c) 2006-2010 Ext JS, Inc.
 * licensing@extjs.com
 * http://www.extjs.com/license
 */
Ext.DataView.LabelEditor=Ext.extend(Ext.Editor,{alignment:"tl-tl",hideEl:false,cls:"x-small-editor",shim:false,completeOnEnter:true,cancelOnEsc:true,labelSelector:"span.x-editable",constructor:function(a,b){Ext.DataView.LabelEditor.superclass.constructor.call(this,b||new Ext.form.TextField({allowBlank:false,growMin:90,growMax:240,grow:true,selectOnFocus:true}),a)},init:function(a){this.view=a;a.on("render",this.initEditor,this);this.on("complete",this.onSave,this)},initEditor:function(){this.view.on({scope:this,containerclick:this.doBlur,click:this.doBlur});this.view.getEl().on("mousedown",this.onMouseDown,this,{delegate:this.labelSelector})},doBlur:function(){if(this.editing){this.field.blur()}},onMouseDown:function(d,c){if(!d.ctrlKey&&!d.shiftKey){var b=this.view.findItemFromChild(c);d.stopEvent();var a=this.view.store.getAt(this.view.indexOf(b));this.startEdit(c,a.data[this.dataIndex]);this.activeRecord=a}else{d.preventDefault()}},onSave:function(a,b){this.activeRecord.set(this.dataIndex,b)}});Ext.DataView.DragSelector=function(f){f=f||{};var i,h,k;var d,j,l=new Ext.lib.Region(0,0,0,0);var b=f.dragSafe===true;this.init=function(p){i=p;i.on("render",o)};function m(){d=[];i.all.each(function(p){d[d.length]=p.getRegion()});j=i.el.getRegion()}function e(){return false}function g(p){return !b||p.target==i.el.dom}function n(p){i.on("containerclick",e,i,{single:true});if(!h){h=i.el.createChild({cls:"x-view-selector"})}else{if(h.dom.parentNode!==i.el.dom){i.el.dom.appendChild(h.dom)}h.setDisplayed("block")}m();i.clearSelections()}function c(z){var A=k.startXY;var E=k.getXY();var C=Math.min(A[0],E[0]);var B=Math.min(A[1],E[1]);var D=Math.abs(A[0]-E[0]);var t=Math.abs(A[1]-E[1]);l.left=C;l.top=B;l.right=C+D;l.bottom=B+t;l.constrainTo(j);h.setRegion(l);for(var s=0,u=d.length;s<u;s++){var p=d[s],q=l.intersect(p);if(q&&!p.selected){p.selected=true;i.select(s,true)}else{if(!q&&p.selected){p.selected=false;i.deselect(s)}}}}function a(p){if(!Ext.isIE){i.un("containerclick",e,i)}if(h){h.setDisplayed(false)}}function o(p){k=new Ext.dd.DragTracker({onBeforeStart:g,onStart:n,onDrag:c,onEnd:a});k.initEl(p.el)}};
/*
 * Ext JS Library 3.2.0
 * Copyright(c) 2006-2010 Ext JS, Inc.
 * licensing@extjs.com
 * http://www.extjs.com/license
 */
Ext.ux.StatusBar=Ext.extend(Ext.Toolbar,{cls:"x-statusbar",busyIconCls:"x-status-busy",busyText:"Loading...",autoClear:5000,emptyText:"&nbsp;",activeThreadId:0,initComponent:function(){if(this.statusAlign=="right"){this.cls+=" x-status-right"}Ext.ux.StatusBar.superclass.initComponent.call(this)},afterRender:function(){Ext.ux.StatusBar.superclass.afterRender.call(this);var a=this.statusAlign=="right";this.currIconCls=this.iconCls||this.defaultIconCls;this.statusEl=new Ext.Toolbar.TextItem({cls:"x-status-text "+(this.currIconCls||""),text:this.text||this.defaultText||""});if(a){this.add("->");this.add(this.statusEl)}else{this.insert(0,this.statusEl);this.insert(1,"->")}this.doLayout()},setStatus:function(d){d=d||{};if(typeof d=="string"){d={text:d}}if(d.text!==undefined){this.setText(d.text)}if(d.iconCls!==undefined){this.setIcon(d.iconCls)}if(d.clear){var e=d.clear,b=this.autoClear,a={useDefaults:true,anim:true};if(typeof e=="object"){e=Ext.applyIf(e,a);if(e.wait){b=e.wait}}else{if(typeof e=="number"){b=e;e=a}else{if(typeof e=="boolean"){e=a}}}e.threadId=this.activeThreadId;this.clearStatus.defer(b,this,[e])}return this},clearStatus:function(c){if(this.isDestroyed){return}c=c||{};if(c.threadId&&c.threadId!==this.activeThreadId){return this}var b=c.useDefaults?this.defaultText:this.emptyText,a=c.useDefaults?(this.defaultIconCls?this.defaultIconCls:""):"";if(c.anim){this.statusEl.el.fadeOut({remove:false,useDisplay:true,scope:this,callback:function(){if(this.isDestroyed){return}this.setStatus({text:b,iconCls:a});this.statusEl.el.show()}})}else{this.statusEl.hide();this.setStatus({text:b,iconCls:a});this.statusEl.show()}return this},setText:function(a){this.activeThreadId++;this.text=a||"";if(this.rendered){this.statusEl.setText(this.text)}return this},getText:function(){return this.text},setIcon:function(a){this.activeThreadId++;a=a||"";if(this.rendered){if(this.currIconCls){this.statusEl.removeClass(this.currIconCls);this.currIconCls=null}if(a.length>0){this.statusEl.addClass(a);this.currIconCls=a}}else{this.currIconCls=a}return this},showBusy:function(a){if(typeof a=="string"){a={text:a}}a=Ext.applyIf(a||{},{text:this.busyText,iconCls:this.busyIconCls});return this.setStatus(a)}});Ext.reg("statusbar",Ext.ux.StatusBar);Ext.ns("SYNO");SYNO.CellActions=Ext.extend(Ext.ux.grid.CellActions,{overClass:"ux-cell-action-over",clickClass:"ux-cell-action-click",onRenderGrid:function(){SYNO.CellActions.superclass.onRenderGrid.apply(this,arguments);this.grid.mon(this.view.mainBody,"mouseover",this.onMouseOver,this);this.grid.on("destroy",this.destroy,this,{single:true})},getTargetEl:function(a){return a.getTarget("div.ux-cell-action")},onMouseOver:function(c){var a=this.getTargetEl(c);if(a&&a!==this.lastItem){this.lastItem=a;var b=Ext.get(a);b.addClass(this.overClass);b.on("mouseout",this.onMouseOut,this)}},onMouseOut:function(a){if(this.lastItem){if(!a.within(this.lastItem,true,true)){Ext.fly(this.lastItem).removeClass(this.overClass);delete this.lastItem}}},onClick:function(b){var a=this.getTargetEl(b);if(a){Ext.fly(a).addClass(this.clickClass);Ext.getDoc().on("mouseup",this.onMouseUp,this);SYNO.CellActions.superclass.onClick.apply(this,arguments)}},onMouseUp:function(b){var a=this.getTargetEl(b);if(a){Ext.fly(a).removeClass(this.clickClass);Ext.getDoc().un("mouseup",this.onMouseUp,this)}},destroy:function(){Ext.getDoc().un("mouseup",this.onMouseUp,this);this.purgeListeners()}});Ext.namespace("SYNO");SYNO.ColorField=Ext.extend(Ext.form.TriggerField,{defaultAutoCreate:{tag:"input",type:"text",size:"10",maxlength:"7",autocomplete:"off"},allowBlank:false,maskRe:/[#a-f0-9]/i,menu:null,constructor:function(a){SYNO.ColorField.superclass.constructor.apply(this,arguments);this.menu=new Ext.menu.ColorMenu();this.mon(this.menu.palette,"select",this.onColorSelect,this);this.addManagedComponent(this.menu)},validateBlur:function(){return !this.menu||!this.menu.isVisible()},validator:function(b){var a=/^#[a-f0-9]{3}([a-f0-9]{3})?$/i;return b&&b.match(a)?true:""},onTriggerClick:function(){if(this.disabled){return}this.menu.show(this.el,"tl-bl?")},onColorSelect:function(a,b){this.setValue("#"+b)}});Ext.reg("colorfield",SYNO.ColorField);Ext.ns("SYNO");SYNO.CustRadio=Ext.extend(Ext.form.Radio,{ctCls:"syno-radiobox",overCls:"x-checkbox-over",values:[false,true],checkedCls:[null,"x-checkbox-checked"],onRender:function(b,a){SYNO.CustRadio.superclass.onRender.call(this,b,a);this.boxEl=this.el.next();this.container.addClassOnOver(this.overCls)},initValue:function(){SYNO.CustRadio.superclass.initValue.apply(this,arguments);this.setValue(this.getValue())},updateCheckCls:function(){if(!this.boxEl){return}var a=this.checkedCls[this.getValue()?1:0];this.boxEl.replaceClass(this._checkCls,a);this._checkCls=a},setValue:function(a){SYNO.CustRadio.superclass.setValue.call(this,a);this.updateCheckCls();return this}});Ext.tree.CustTreeNodeUI=function(){Ext.tree.CustTreeNodeUI.superclass.constructor.apply(this,arguments)};Ext.tree.CustTreeNodeUI.HIDESTATE=3;Ext.tree.CustTreeNodeUI.CHECKSTATE=2;Ext.tree.CustTreeNodeUI.UNCHECKSTATE=1;Ext.tree.CustTreeNodeUI.GRAYSTATE=0;Ext.extend(Ext.tree.CustTreeNodeUI,Ext.tree.TreeNodeUI,{values:[null,false,true],checkedCls:["x-checkbox-grayed",null,"x-checkbox-checked"],checkboxCls:"x-checkbox",expanded:false,err:-1,textField:null,showTextFieldAlways:false,initEvents:function(){Ext.tree.CustTreeNodeUI.superclass.initEvents.apply(this,arguments);if(this.checkbox){Ext.EventManager.on(this.checkbox,"click",this.toggleCheck,this)}},destroy:function(){if(this.checkbox){Ext.EventManager.un(this.checkbox,"click",this.toggleCheck,this)}Ext.tree.CustTreeNodeUI.superclass.destroy.apply(this,arguments)},getCheckIndex:function(b){for(var a=0;a<this.values.length;a++){if(b.getUI()&&b.getUI().checkbox&&b.getUI().checkbox.checked===this.values[a]){return a}}return this.err},getTextValue:function(a){return a.getUI().textField.value},setTextValue:function(b,a){b.getUI().textField.value=a},clearCheck:function(){if(true===this.node.disabled){return}this.onCheckChange(Ext.tree.CustTreeNodeUI.UNCHECKSTATE)},onCheckChange:function(a){this.checkbox.checked=this.values[a];this.checkbox.className=this.checkedCls[a];if(this.node.firstChild){this.updateChild(this.node.firstChild,a)}if(this.node.parentNode!=this.root){this.updateParent(this.node.parentNode,a)}var b=this.checkbox.checked;this.node.attributes.checked=b;this.fireEvent("checkchange",this.node,b)},toggleCheck:function(){if(true===this.node.disabled){return}var a=this.getCheckIndex(this.node);a=(a===Ext.tree.CustTreeNodeUI.UNCHECKSTATE)?Ext.tree.CustTreeNodeUI.CHECKSTATE:Ext.tree.CustTreeNodeUI.UNCHECKSTATE;this.onCheckChange(a)},updateChild:function(b,a){var c=b;do{if(c.disabled){c=c.nextSibling;continue}if(c.getUI()&&c.getUI().checkbox){c.getUI().checkbox.checked=this.values[a];c.getUI().checkbox.className=this.checkedCls[a]}if(c.firstChild){this.updateChild(c.firstChild,a)}c=c.nextSibling}while(c)},updateParent:function(d,a){var c=this.getCheckIndex(d);if(a!=c){var b=this.checkchildstate(d);if(d.getUI()&&d.getUI().checkbox){d.getUI().checkbox.checked=this.values[b];d.getUI().checkbox.className=this.checkedCls[b]}if(d.parentNode!=this.root){this.updateParent(d.parentNode,b)}}},checkchildstate:function(c){var b=c.firstChild;var a;if(!b){return this.err}while(b){if(Ext.tree.CustTreeNodeUI.UNCHECKSTATE!==this.getCheckIndex(b)){return Ext.tree.CustTreeNodeUI.GRAYSTATE}b=b.nextSibling}return Ext.tree.CustTreeNodeUI.UNCHECKSTATE},renderElements:function(e,i,h,j){this.indentMarkup=e.parentNode?e.parentNode.ui.getChildIndent():"";var f=(undefined===i.inputType)?"text":i.inputType;var b,c=i.href?i.href:Ext.isGecko?"":"#",d=['<li class="x-tree-node">','<div ext:tree-node-id="',Ext.util.Format.htmlEncode(e.id),'" class="x-tree-node-el x-tree-node-leaf x-unselectable ',i.cls,'" unselectable="on">','<span class="x-tree-node-indent">',this.indentMarkup,"</span>",'<img alt="" src="',this.emptyIcon,'" class="x-tree-ec-icon x-tree-elbow" />','<img alt="" src="',i.icon||this.emptyIcon,'" class="x-tree-node-icon',(i.icon?" x-tree-node-inline-icon":""),(i.iconCls?" "+i.iconCls:""),'" unselectable="on" />','<span><img alt="" src="'+this.emptyIcon+'" style="margin:0 2px 0 2px;" class="x-checkbox" /></span>','<a hidefocus="on" class="x-tree-node-anchor" href="',c,'" tabIndex="1" ',i.hrefTarget?' target="'+i.hrefTarget+'"':"",'><span unselectable="on">',e.text,"</span></a>",'<input style="width:140px;" class="x-form-text x-form-field" type='+f+"></input>","</div>",'<ul class="x-tree-node-ct" style="display:none;"></ul>',"</li>"].join("");if(j!==true&&e.nextSibling&&(b=e.nextSibling.ui.getEl())){this.wrap=Ext.DomHelper.insertHtml("beforeBegin",b,d)}else{this.wrap=Ext.DomHelper.insertHtml("beforeEnd",h,d)}this.elNode=this.wrap.childNodes[0];this.ctNode=this.wrap.childNodes[1];var g=this.elNode.childNodes;this.indentNode=g[0];this.ecNode=g[1];this.iconNode=g[2];this.checkbox=g[3];if(i.checked==="checked"){this.checkbox.checked=this.values[Ext.tree.CustTreeNodeUI.CHECKSTATE];this.checkbox.className=this.checkedCls[Ext.tree.CustTreeNodeUI.CHECKSTATE]}else{if(i.checked==="gray"){this.checkbox.checked=this.values[Ext.tree.CustTreeNodeUI.GRAYSTATE];this.checkbox.className=this.checkedCls[Ext.tree.CustTreeNodeUI.GRAYSTATE]}else{if(i.checked==="unchecked"){this.checkbox.checked=this.values[Ext.tree.CustTreeNodeUI.UNCHECKSTATE];this.checkbox.className=this.checkedCls[Ext.tree.CustTreeNodeUI.UNCHECKSTATE]}else{this.checkbox.hide()}}}this.anchor=g[4];this.textNode=g[4].firstChild;this.textField=g[5];if(true!==i.showTextField){this.textField.hide()}if(i.textValue){this.textField.value=i.textValue}this.showTextFieldAlways=i.showTextFieldAlways},onClick:function(c){if(this.dropping){c.stopEvent();return}if(this.fireEvent("beforeclick",this.node,c)!==false){var b=c.getTarget("a");if(!this.disabled&&this.node.attributes.href&&b){this.fireEvent("click",this.node,c);return}else{if(b&&c.ctrlKey){c.stopEvent()}}c.preventDefault();if(this.disabled){return}if(this.node.attributes.singleClickExpand&&!this.animating&&this.node.isExpandable()){this.node.toggle()}this.fireEvent("click",this.node,c);if(true===this.node.attributes.showTextField){this.textField.focus()}}else{c.stopEvent()}},onDisableChange:function(a,b){this.disabled=b;if(this.checkbox){this.checkbox.disabled=b}if(b){this.addClass("x-tree-node-disabled")}else{this.removeClass("x-tree-node-disabled")}if(this.textField){if(this.showTextFieldAlways){this.textField.disabled=false}else{this.textField.disabled=b}}}});Ext.namespace("SYNO");SYNO.EnableColumn=Ext.extend(Ext.grid.Column,{commitChanges:false,bindRowClick:false,enableFastSelectAll:false,disableSelectAll:false,constructor:function(b){var a='<input id="{0}" type="checkbox" style="height:10px;vertical-align:middle">&nbsp;{1}';this.box_id=Ext.id();if(!b.disableSelectAll){b.header=String.format(a,this.box_id,b.header||"")}SYNO.EnableColumn.superclass.constructor.call(this,b)},init:function(a){if(!Ext.isDefined(this.dataIndex)||!Ext.isDefined(this.id)){throw Error("you should set dataIndex and id for EnableColumn")}a.mon(a,"cellclick",function(c,e,b,d){if(c.getColumnModel().getColumnId(b)===this.id||this.bindRowClick){this.onCellClick(c,e,d)}},this);a.mon(a,"headerclick",function(d,c,b){var e;if(d.getColumnModel().getColumnId(c)===this.id||this.bindRowClick){e=b.getTarget("input",1,true);if(e){this.onSelectAll()}}},this);a.mon(a,"afterrender",function(b){this.box_el=Ext.get(this.box_id);b.mon(b.getStore(),"add",this.checkSelectAll,this);b.mon(b.getStore(),"remove",this.checkSelectAll,this);b.mon(b.getStore(),"load",this.checkSelectAll,this);b.mon(b.getColumnModel(),"columnmoved",this.onColumnMoved,this);b.mon(b.getColumnModel(),"headerchange",this.onHeaderChange,this);b.mon(b.getView(),"refresh",this.onHeaderChange,this);this.checkSelectAll(b.getStore())},this,{single:true});this.getGrid=function(){return a}},isIgnore:function(b,a){return false},toggleRec:function(b){var a=b.get(this.dataIndex);if("gray"===a){a=false}b.set(this.dataIndex,!a)},onColumnMoved:function(){this.box_el=Ext.get(this.box_id);this.checkSelectAll(this.getGrid().getStore())},onHeaderChange:function(){this.box_el=Ext.get(this.box_id);this.checkSelectAll(this.getGrid().getStore())},onSelectAll:function(){var d,b,e,c,a;if(!this.box_el||!this.box_el.dom){return}d=this.getGrid().getStore();a=!!(this.box_el.dom.checked);if(this.enableFastSelectAll){d.suspendEvents()}for(b=0,c=d.getCount();b<c;b++){e=d.getAt(b).get(this.dataIndex);if(("gray"!==e&&!!(e)===a)||this.isIgnore("all",d.getAt(b))){continue}this.toggleRec(d.getAt(b))}if(this.enableFastSelectAll){this.getGrid().getView().refresh();d.resumeEvents()}if(this.commitChanges){d.commitChanges()}this.checkSelectAll(d)},onCellClick:function(a,d,b){var c=a.getStore();if(this.isIgnore("cell",c.getAt(d))){return}c=a.getStore();this.toggleRec(c.getAt(d));if(this.commitChanges){c.commitChanges()}this.checkSelectAll(c)},checkSelectAll:function(d){var a,e,c=d.getCount();var b=(c>0);if(!this.box_el||!this.box_el.dom){return}for(a=0;a<c;a++){if(this.isIgnore("check",d.getAt(a))){continue}e=d.getAt(a).get(this.dataIndex);if("gray"===e||!e){b=false;break}}this.box_el.dom.checked=b},renderer:function(c,b,a){return String.format('<div class="syno-grid-enable-column-{0}">&nbsp;</div>',("gray"===c?"grayed":c?"checked":"unchecked"))}});Ext.namespace("SYNO.LayoutConfig");Ext.apply(SYNO.LayoutConfig,{FIXED_INDENT_WIDTH:19,DEFAULT_FIELD_WIDTH:250,DEFAULT_LABEL_WIDTH:180});SYNO.LayoutConfig.calcLabelStyle=function(c){var f=SYNO.LayoutConfig;var a=c.indent||0;var b=a*f.FIXED_INDENT_WIDTH;var e=c.width||f.DEFAULT_LABEL_WIDTH;var d=String.format("margin-left: {0}px; width: {1}px;",b,e-b);return d};SYNO.LayoutConfig.calcFieldStyle=function(c){var e=SYNO.LayoutConfig;var a=c.indent||0;var b=a*e.FIXED_INDENT_WIDTH;var d=String.format("margin-left: {0}px;",b);return d};Ext.apply(SYNO.LayoutConfig,{fillWidth:function(a,b){if(!b.width&&a.synodefaults&&a.synodefaults.width){b.width=a.synodefaults.width}return b},fillHiddenNameId:function(a,b){if(b.name){b.hiddenName=b.name;b.hiddenId=Ext.id()}return b},fillItemId:function(a,b){if(b.name){b.itemId=b.name}return b},fillTextMaxLen:function(a,b){if(b.maxlength){b.autoCreate={tag:"input",type:"text",maxlength:b.maxlength}}return b},fillPasswordMaxLen:function(a,b){if(b.maxlength){b.autoCreate={tag:"input",type:"password",maxlength:b.maxlength}}return b},fillLabelStyle:function(a,b){b.labelStyle=SYNO.LayoutConfig.calcLabelStyle({width:b.labelWidth||a.labelWidth,indent:b.indent});return b},fillFieldStyle:function(a,b){b.style=SYNO.LayoutConfig.calcFieldStyle({indent:b.indent});return b},fillPasswordConfirmValidator:function(a,b){if(b.confirmFor&&!b.validator){b.validator=function(e){if(!this.ownerCt){return"Failed to find ownerCt"}var c=this.ownerCt.get(this.confirmFor);var d=c.getValue();if((e!==d)&&(d!=="12345678"||e!=="87654321")){return _JSLIBSTR("vtype","password_confirm_failed")}return true}}return b}});Ext.ns("SYNO.LayoutConfig.Types");Ext.ns("SYNO.LayoutConfig.Defaults");SYNO.LayoutConfig.Defaults.combo={xtype:"combo",triggerAction:"all",editable:false,mode:"local"};SYNO.LayoutConfig.Types.combo=function(a,b){Ext.applyIf(b,SYNO.LayoutConfig.Defaults.combo);SYNO.LayoutConfig.fillWidth(a,b);SYNO.LayoutConfig.fillHiddenNameId(a,b);SYNO.LayoutConfig.fillTextMaxLen(a,b);SYNO.LayoutConfig.fillLabelStyle(a,b);return b};SYNO.LayoutConfig.Defaults.desc={xtype:"displayfield",hideLabel:true};SYNO.LayoutConfig.Types.desc=function(a,b){Ext.applyIf(b,SYNO.LayoutConfig.Defaults.desc);SYNO.LayoutConfig.fillFieldStyle(a,b);return b};SYNO.LayoutConfig.Defaults.check={xtype:"checkbox",hideLabel:true};SYNO.LayoutConfig.Types.check=function(a,b){Ext.applyIf(b,SYNO.LayoutConfig.Defaults.check);SYNO.LayoutConfig.fillFieldStyle(a,b);return b};SYNO.LayoutConfig.Defaults.radio={xtype:"radio",hideLabel:true};SYNO.LayoutConfig.Types.radio=function(a,b){Ext.applyIf(b,SYNO.LayoutConfig.Defaults.radio);SYNO.LayoutConfig.fillFieldStyle(a,b);return b};SYNO.LayoutConfig.Defaults.text={xtype:"textfield",msgTarget:"qtip",validateOnBlur:true,validationEvent:"blur"};SYNO.LayoutConfig.Types.text=function(a,b){Ext.applyIf(b,SYNO.LayoutConfig.Defaults.text);SYNO.LayoutConfig.fillWidth(a,b);SYNO.LayoutConfig.fillTextMaxLen(a,b);SYNO.LayoutConfig.fillLabelStyle(a,b);return b};SYNO.LayoutConfig.Defaults.password={xtype:"textfield",inputType:"password",msgTarget:"qtip",validateOnBlur:true,validationEvent:"blur"};SYNO.LayoutConfig.Types.password=function(a,b){Ext.applyIf(b,SYNO.LayoutConfig.Defaults.password);SYNO.LayoutConfig.fillWidth(a,b);SYNO.LayoutConfig.fillItemId(a,b);SYNO.LayoutConfig.fillPasswordMaxLen(a,b);SYNO.LayoutConfig.fillLabelStyle(a,b);return b};SYNO.LayoutConfig.Defaults.password_confirm={xtype:"textfield",inputType:"password",msgTarget:"qtip",validateOnBlur:true,validationEvent:"blur"};SYNO.LayoutConfig.Types.password_confirm=function(a,b){Ext.applyIf(b,SYNO.LayoutConfig.Defaults.password_confirm);SYNO.LayoutConfig.fillWidth(a,b);SYNO.LayoutConfig.fillItemId(a,b);SYNO.LayoutConfig.fillPasswordMaxLen(a,b);SYNO.LayoutConfig.fillLabelStyle(a,b);SYNO.LayoutConfig.fillPasswordConfirmValidator(a,b);return b};SYNO.LayoutConfig.Defaults.number={xtype:"numberfield",msgTarget:"qtip",validateOnBlur:true,validationEvent:"blur",allowDecimals:false,allowNegative:false,allowBlank:false};SYNO.LayoutConfig.Types.number=function(a,b){Ext.applyIf(b,SYNO.LayoutConfig.Defaults.number);SYNO.LayoutConfig.fillWidth(a,b);SYNO.LayoutConfig.fillTextMaxLen(a,b);SYNO.LayoutConfig.fillLabelStyle(a,b);return b};SYNO.LayoutConfig.Defaults.indent={};SYNO.LayoutConfig.Types.indent=function(a,b){Ext.applyIf(b,SYNO.LayoutConfig.Defaults.indent);SYNO.LayoutConfig.fillWidth(a,b);SYNO.LayoutConfig.fillLabelStyle(a,b);return b};SYNO.LayoutConfig.Defaults.indent_no_label={hideLabel:true};SYNO.LayoutConfig.Types.indent_no_label=function(a,b){Ext.applyIf(b,SYNO.LayoutConfig.Defaults.indent_no_label);SYNO.LayoutConfig.fillWidth(a,b);SYNO.LayoutConfig.fillFieldStyle(a,b);return b};SYNO.LayoutConfig.fill=function(a){var b=SYNO.LayoutConfig;return b.fillForm(a)};SYNO.LayoutConfig.fillFormField=function(a,c){if(!c){return arguments.callee({},a)}var b=c.synotype;Ext.each(c.items||[],function(f,d,e){SYNO.LayoutConfig.fillFormField(c,f)});if(b&&SYNO.LayoutConfig.Types[b]){SYNO.LayoutConfig.Types[b](a,c)}return c};SYNO.LayoutConfig.fillForm=function(a){return SYNO.LayoutConfig.fillFormField(a)};Ext.ns("SYNO.SDS");SYNO.SDS.PagelessGridView=(function(){var c=undefined;var b=Ext.ux.grid.BufferView;var a=Ext.extend(b,{position:0,scrollBuffer:200,init:function(d){c.init.apply(this,arguments);this.ds.on({guaranteedrange:this.onGuaranteedRange,loadByIndex:this.onLoadByIndex,scope:this});this.needRefresh=true},onLoadByIndex:function(e,h){var g=this,d=g.getCalculatedRowHeight();h=h||0;var f=Ext.isIE&&!Ext.isIE9?false:{duration:0.35*h/e.getTotalCount()};g.scroller.scrollTo("top",d*h,f)},afterRenderUI:function(){c.afterRenderUI.apply(this,arguments);this.scroller.un("scroll",Ext.ux.grid.BufferView.syncScroll,Ext.ux.grid.BufferView);this.scroller.on("scroll",this.syncScroll,this,{buffer:this.scrollBuffer||0})},onGuaranteedRange:function(f,i,e){var g=this,h=g.ds,d=g.getVisibleRows();if(f.length&&d.first<f[0].index){return}h.guaranteeLoadRecords(f);g.update()},getParams:function(){return this.paramNames||this.grid.store.paramNames},getRowCount:function(){var e=this,d=e.ds;return d[(!d.remoteFilter&&d.isFiltered())?"getCount":"getTotalCount"]()||0},getScrollHeight:function(){var f=this,e=f.getCalculatedRowHeight(),d=f.getRowCount();return d*e},getVisibleRows:function(){var d=this.getVisibleRowCount(),e=this.scroller.dom.scrollTop,f=(e===0?0:Math.floor(e/this.getCalculatedRowHeight())-1);return{first:Math.max(f,0),last:Math.min(f+d+1,this.ds.getTotalCount()-1)}},onLoad:function(d,f,e){this.update()},doRender:function(k,m,x,d,u,D,n){var e=this.templates,h=e.cell,l=e.row,A=e.rowBody,q=u-1,w=this.getStyleRowHeight(),C=this.getVisibleRows(),f="width:"+this.getTotalWidth()+";height:"+w+"px;",G=[],z,H,y={},o={tstyle:f},t;for(var B=0,F=m.length;B<F;B++){t=m[B];z=[];var s=(B+d),g=t.hasRec!==false;if(g){for(var E=0;E<u;E++){H=k[E];y.id=H.id;y.css=E===0?"x-grid3-cell-first ":(E==q?"x-grid3-cell-last ":"");y.attr=y.cellAttr="";y.value=H.renderer(t.data[H.name],y,t,s,E,x);y.style=H.style;if(y.value===undefined||y.value===""){y.value="&#160;"}if(t.dirty&&typeof t.modified[H.name]!=="undefined"){y.css+=" x-grid3-dirty-cell"}z[z.length]=h.apply(y)}}var I=[];if(D&&((s+1)%2===0)){I[0]="x-grid3-row-alt"}if(t.dirty){I[1]=" x-grid3-dirty-row"}o.cols=u;if(this.getRowClass){I[2]=this.getRowClass(t,s,o,x)}o.alt=I.join(" ");o.cells=z.join("");G[G.length]=!g?e.rowHolder.apply(o):(n?A.apply(o):l.apply(o))}return G.join("")},renderRows:function(p,h){var k=this,d=k.grid,n=d.store,q=d.stripeRows,m=d.colModel,o=m.getColumnCount(),l=k.getRowCount(),f=[],e,g,r=k.getVisibleRows();if(l<1||n.getCount()<1){return""}p=p||0;h=Ext.isDefined(h)?h:n.getCount()-1;for(var j=0;j<l;j++){if((j>=r.firs&&j<=r.last)&&k.ds.getAt(j)){f.push(k.ds.getAt(j))}else{g=new n.recordType();g.hasRec=false;f.push(g)}}return this.doRender(this.getColumnData(),f,n,0,o,q)},onDataChange:function(f,e){var g=this,d=g.getVisibleRows();if(g.needRefresh){g.refresh(true)}g.updateHeaderSortState();if(!g.ds.rangeSatisfied(d.first,d.last)){g.doUpdateScroll()}g.needRefresh=true},doUpdateScroll:function(){var e=this,d=e.getCalculatedRowHeight(),g=e.ds.guaranteedStart||0,f=d*g;e.scroller.un("scroll",e.syncScroll,e);e.scroller.scrollTo("top",f);e.scroller.on("scroll",e.syncScroll,e,{buffer:e.scrollBuffer||0})},attemptLoad:function(f,d){var e=this;if(!e.loadTask){e.loadTask=new Ext.util.DelayedTask(e.doAttemptLoad,e,[])}e.loadTask.delay(e.scrollBuffer,e.doAttemptLoad,e,[f,d])},cancelLoad:function(){if(this.loadTask){this.loadTask.cancel()}},doAttemptLoad:function(f,d){var e=this;e.ds.mask();e.ds.guaranteeRange(f,d)},doUpdate:function(){var l=this;if(this.getVisibleRowCount()>0){var j=l.grid,m=j.colModel,d=j.store,k=l.getColumnData(),o=l.getVisibleRows(),f,n;for(var e=o.first;e<=o.last;e++){if(!l.isRowRendered(e)&&(n=l.getRow(e))){f=l.ds.getAt(e);if(f){var h=l.doRender(k,[f],d,e,m.getColumnCount(),j.stripeRows,true);n.innerHTML=h}}}this.clean()}},doClean:function(){if(this.getVisibleRowCount()>0){var g=this,e=g.getVisibleRows();if(e.first<g.cacheSize){e.first=0}else{e.first-=g.cacheSize}e.last+=g.cacheSize;var f=0,h=g.getRows();for(var d=g.getRowCount();f<d;f++){if((f<e.first||f>e.last)&&h[f]){h[f].innerHTML=""}}}},onViewScroll:function(g){var f=this,d=f.position;f.position=f.scroller.dom.scrollTop;f.lastScrollDirection=f.position>d?1:-1;if(d!==f.position){f.handleViewScroll(g,f.lastScrollDirection)}},handleViewScroll:function(k,n){var l=this,p=l.ds,m=l,d=p.guaranteedStart,h=p.guaranteedEnd,g=p.getCount(),q=p.getTotalCount(),j=q-g,s=l.getVisibleRows(),i=s.first,o=s.last,f,r;if(q>=g){l.scrollProportion=undefined;if(n==-1){if(i!==undefined){if(i<(d+l.numFromEdge)){f=Math.max(0,o+p.numFromEdge-p.pageSize)}else{f=i}}}else{if(i!==undefined){if(o>(h-p.numFromEdge)){f=i-p.numFromEdge}else{f=i-p.numFromEdge}}}if(f!==undefined){r=o+p.numFromEdge;if(p.rangeSatisfied(f,r)){l.cancelLoad();l.needRefresh=false;p.guaranteeRange(f,r)}else{l.needRefresh=true;l.attemptLoad(f,r)}}}},syncScroll:function(d){b.superclass.syncScroll.apply(this,arguments);this.onViewScroll(d)},onLayout:function(f,g){var e=this,d=e.verticalScrollHeight;c.onLayout.apply(this,arguments);e.verticalScrollHeight=g;if(d<e.verticalScrollHeight){e.tryLoadData()}},resolveCell:function(j,g,i){if(!Ext.isNumber(j)){j=j.rowIndex}if(!this.ds){return null}if(j<0||j>=this.ds.getTotalCount()||this.ds.getCount()===0){return null}g=(g!==undefined?g:0);var f=this.getRow(j),e=this.cm,h=e.getColumnCount(),d;if(!(i===false&&g===0)){while(g<h&&e.isHidden(g)){g++}d=this.getCell(j,g)}return{row:f,cell:d}},tryLoadData:function(){var g=this,e=g.ds,d=g.getVisibleRows(),h=d.first,f=d.last;if(f<=h){return}if(e.rangeSatisfied(h,f)){g.cancelLoad();g.needRefresh=false;e.guaranteeRange(h-e.numFromEdge,f+e.numFromEdge)}else{g.needRefresh=true;g.attemptLoad(h-e.numFromEdge,f+e.numFromEdge)}}});c=a.superclass;return a})();Ext.ns("SYNO.SDS");SYNO.SDS.PagingToolbar=Ext.extend(Ext.Toolbar,{displayMsg:_JSLIBSTR("uicommon","totalDataLength"),firstText:_JSLIBSTR("extlang","firstpage"),prevText:_JSLIBSTR("extlang","prevpage"),nextText:_JSLIBSTR("extlang","nextpage"),lastText:_JSLIBSTR("extlang","lastpage"),refreshText:_JSLIBSTR("extlang","refresh"),emptyMsg:_JSLIBSTR("extlang","pagenodata"),initComponent:function(){var a=Ext.Toolbar,c=[this.first=new a.Button({tooltip:this.firstText,overflowText:this.firstText,iconCls:"x-tbar-page-first",disabled:true,handler:this.moveFirst,scope:this}),this.prev=new a.Button({tooltip:this.prevText,overflowText:this.prevText,iconCls:"x-tbar-page-prev",disabled:true,hidden:true,handler:this.movePrevious,scope:this}),"-",this.next=new a.Button({tooltip:this.nextText,overflowText:this.nextText,iconCls:"x-tbar-page-next",disabled:true,hidden:true,handler:this.moveNext,scope:this}),this.last=new a.Button({tooltip:this.lastText,overflowText:this.lastText,iconCls:"x-tbar-page-last",disabled:true,handler:this.moveLast,scope:this}),"-",this.refresh=new a.Button({tooltip:this.refreshText,overflowText:this.refreshText,iconCls:"x-tbar-loading",handler:this.doRefresh,scope:this})];var b=this.items||this.buttons||[];if(this.prependButtons){this.items=b.concat(c)}else{this.items=c.concat(b)}delete this.buttons;if(this.displayInfo){this.items.push("->");this.items.push(this.displayItem=new Ext.Toolbar.TextItem({}))}SYNO.SDS.PagingToolbar.superclass.initComponent.call(this);this.addEvents("change","beforechange");this.bindStore(this.store,true)},updateInfo:function(){if(this.displayItem){var a=this.store.getCount();var b=String.format(this.displayMsg,this.store.getTotalCount());this.displayItem.setText(b)}},onLoad:function(a,c,e){if(!this.rendered){this.dsLoaded=[a,c,e];return}var d=this.getParams(),b=this.store.getTotalCount()>0;if(e){this.cursor=(e.params&&e.params[d.start])?e.params[d.start]:0}this.first.setDisabled(!b);this.prev.setDisabled(!b);this.next.setDisabled(!b);this.last.setDisabled(!b);this.refresh.enable();this.updateInfo();this.fireEvent("change",this)},getPageData:function(){var a=this.store.getTotalCount();return{total:a,activePage:Math.ceil((this.cursor+this.pageSize)/this.pageSize),pages:a<this.pageSize?1:Math.ceil(a/this.pageSize)}},onLoadError:function(){if(!this.rendered){return}this.refresh.enable()},getParams:function(){return this.paramNames||this.store.paramNames},beforeLoad:function(){if(this.rendered&&this.refresh){this.refresh.disable()}},doLoad:function(g,b){var e=this,f={},d=this.getParams(),c=e.store,a=e.pageSize||c.pageSize;b=Math.max(b,a);f[d.start]=g;f[d.limit]=b;if(e.fireEvent("beforechange",e,f)!==false){if(c.buffered){c.mask();c.prefetch({start:g,limit:b,params:f,callback:function(){c.guaranteeRange(g,g+b-1)}})}else{c.load({params:f})}}},moveFirst:function(){this.store.loadByIndex(0)},movePrevious:function(){var b=this.store.guaranteedStart||0,a=this.pageSize||this.store.pageSize;this.store.loadByIndex((b/a-1)*a)},moveNext:function(){var b=this.store.guaranteedStart||0,a=this.pageSize||this.store.pageSize;this.store.loadByIndex((b/a+1)*a)},moveLast:function(){this.store.loadByIndex(this.store.getTotalCount())},doRefresh:function(){var b=this,a=b.store,c=a.guaranteedStart||this.cursor||0;if(a.getTotalCount()<c){c=a.getTotalCount()-(a.pageSize||this.pageSize)}this.doLoad(c,a.guaranteedEnd-a.guaranteedStart+1)},bindStore:function(b,c){var a;if(!c&&this.store){if(b!==this.store&&this.store.autoDestroy){this.store.destroy()}else{this.store.un("beforeload",this.beforeLoad,this);this.store.un("load",this.onLoad,this);this.store.un("exception",this.onLoadError,this)}if(!b){this.store=null}}if(b){b=Ext.StoreMgr.lookup(b);b.on({scope:this,beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError});a=true}this.store=b;if(a){this.onLoad(b,null,{})}},unbind:function(a){this.bindStore(null)},bind:function(a){this.bindStore(a)},onDestroy:function(){this.bindStore(null);SYNO.SDS.PagingToolbar.superclass.onDestroy.call(this)}});Ext.reg("synopaging",SYNO.SDS.PagingToolbar);Ext.ns("SYNO.SDS");SYNO.SDS.RowSelectionModel=Ext.extend(Ext.grid.RowSelectionModel,{init:function(a){SYNO.SDS.RowSelectionModel.superclass.init.apply(this,arguments);var b=this,c=b.grid.store;if(c.buffered){b.selected={};b.innerSelections=[];b.buffered=true}},onRefresh:function(){var g=this.grid.store,e=this.selections,d=0,a=e.length,c,f;this.silent=true;if(!this.buffered){this.clearSelections(true);for(;d<a;d++){f=e[d];if((c=g.indexOfId(f.id))!=-1){this.selectRow(c,true)}}}else{var b=[];for(d=g.getCount()-1;d>=0;d--){f=g.getAt(d);if(f&&this.selected[f.id]){b.push(f.index||d)}}this.selectRows(b,true)}if(e.length!=this.selections.getCount()){this.fireEvent("selectionchange",this)}this.silent=false},clearSelections:function(a){SYNO.SDS.RowSelectionModel.superclass.clearSelections.apply(this,arguments);if(this.buffered){this.selected={};this.innerSelections=[]}},getSelections:function(){return[].concat(this.innerSelections)},selectAll:function(){if(this.isLocked()){return}if(!this.buffered){SYNO.SDS.RowSelectionModel.superclass.selectAll.apply(this,arguments)}else{var a=this.grid.store;a.suspendEvents();a.load({params:{start:0,limit:a.getTotalCount()},callback:function(){this.innerSelections=a.data.items.slice(0);this.selections.clear();this.selected={};for(var b=this.innerSelections.length-1;b>=0;b--){this.selected[this.innerSelections[b].id]=true}a.resumeEvents();this.onRefresh()},scope:this})}},selectRecords:function(b,f){if(!f){this.clearSelections()}var e=this.grid.store,c=0,a=b.length,d;for(;c<a;c++){d=b[c];if((index=e.indexOfId(d.id))!=-1){this.selectRow(e.getAt(index).index||index,true)}}},selectRow:function(b,e,a){var d=this;if(d.isLocked()){return}var c=this.grid.store.getAt(b);if(c&&this.fireEvent("beforerowselect",this,b,e,c)!==false){if(!e||this.singleSelect){this.clearSelections()}this.selections.add(c);if(d.buffered&&!this.selected[c.id]){this.innerSelections.push(c);this.selected[c.id]=true}this.last=this.lastActive=b;if(!a){this.grid.getView().onRowSelect(b)}if(!this.silent){this.fireEvent("rowselect",this,b,c);this.fireEvent("selectionchange",this)}}},selectRecord:function(a,e,b){var d=this,c=a.index;if(d.isLocked()||!c){return}if(a&&this.fireEvent("beforerowselect",this,c,e,a)!==false){if(!e||this.singleSelect){this.clearSelections()}this.selections.add(a);if(d.buffered&&!this.selected[a.id]){this.innerSelections.push(a);this.selected[a.id]=true}if(!b){this.grid.getView().onRowSelect(c)}if(!this.silent){this.fireEvent("rowselect",this,c,a);this.fireEvent("selectionchange",this)}}},remoteSelectRange:function(c,b,e){if(this.isLocked()){return}if(this.buffered){var d=this.grid.store,a;if(c>b){a=b;b=c;c=a}if(d.rangeSatisfied(c,b)){this.selectRange(c,b,e);return}c=Math.max(0,c);b=Math.min(b,d.getTotalCount()-1);d.suspendEvents();d.prefetch({start:c,limit:b-c+1,callback:function(g){var h=d.prefetchData.items;if(!e){this.clearSelections()}for(var f=h.length-1;f>=0;f--){this.selectRecord(h[f],true)}d.resumeEvents()},scope:this})}else{this.selectRange(c,b,e)}},handleMouseDown:function(d,h,f){if(f.button!==0||this.isLocked()){return}var a=this.grid.getView();if(f.shiftKey&&!this.singleSelect&&this.last!==false){var c=this.last;this.remoteSelectRange(c,h,f.ctrlKey);this.last=c;a.focusRow(h)}else{var b=this.isSelected(h);if(f.ctrlKey&&b){this.deselectRow(h)}else{if(!b||this.getCount()>1){this.selectRow(h,f.ctrlKey||f.shiftKey);a.focusRow(h)}}}},hasNext:function(){return this.last!==false&&(this.last+1)<this.grid.store.getTotalCount()},deselectRow:function(b,a){if(this.isLocked()){return}if(this.last==b){this.last=false}if(this.lastActive==b){this.lastActive=false}var d=this.grid.store.getAt(b);if(d){this.selections.remove(d);if(this.buffered){for(var c=this.innerSelections.length-1;c>=0;c--){if(this.innerSelections[c].id==d.id){this.innerSelections.splice(c,1);this.selected[d.id]=false;delete this.selected[d.id];break}}}if(!a){this.grid.getView().onRowDeselect(b)}this.fireEvent("rowdeselect",this,b,d);this.fireEvent("selectionchange",this)}}});Ext.ns("SYNO.SDS");SYNO.SDS.Store=Ext.extend(Ext.data.Store,{prefetchData:null,pageSize:25,numFromEdge:15,defaultPageSize:25,purgePageCount:2,buffered:false,constructor:function(b){var c=this,a=function(d){return d.index};SYNO.SDS.Store.superclass.constructor.apply(c,arguments);Ext.apply(c,b);if(b.buffered||c.buffered){c.prefetchData=new Ext.util.MixedCollection(false,a);c.pendingRequests=[];c.pagesRequested=[];c.sortOnLoad=false;c.filterOnLoad=false;this.addEvents("beforeprefetch","guaranteedrange","totalcountchange","loadByIndex")}},loadByIndex:function(a){this.fireEvent("loadByIndex",this,a)},getRequestId:function(){this.requestSeed=this.requestSeed||1;return this.requestSeed++},getAt:function(a){var b=0,c;for(;b<this.data.items.length;b++){c=this.data.items[b];if(c.index===a){return c}}return this.data.itemAt(a)},indexOfId:function(a){return this.data.key(a)?this.data.key(a).index||this.data.indexOfKey(a):this.data.indexOfKey(a)},indexOf:function(a){return this.prefetchData.indexOf(a)!==-1?a.index:this.data.indexOf(a)},removeAllBuffer:function(a){this.prefetchData.clear()},doSort:function(){var b=this,a;if(b.remoteSort){if(b.buffered){a=b.getCount();b.prefetchData.clear();b.prefetch({start:0,limit:b.pageSize,callback:function(d,c,e){if(e){b.guaranteedStart=0;b.guaranteedEnd=d.length-1;b.guaranteeLoadRecords(d.slice(0,a))}}})}else{b.load()}}else{b.applySort()}},singleSort:function(k,c){var h=this,j=h.prefetchData,g,b,e,f;var i=h.fields.get(k);if(!i){return false}var a=i.name,l=h.sortInfo||null,d=h.sortToggle?h.sortToggle[a]:null;if(!c){if(l&&l.field==a){c=(h.sortToggle[a]||"ASC").toggle("ASC","DESC")}else{c=i.sortDir}}h.sortToggle[a]=c;h.sortInfo={field:a,direction:c};h.hasMultiSort=false;if(h.buffered){if(h.remoteSort){h.prefetchData.clear();h.doSort()}else{g=h.getSorters();b=h.guaranteedStart;e=h.guaranteedEnd;if(g.length){j.sort(g);f=j.getRange();j.clear();h.cacheRecords(f);delete h.guaranteedStart;delete h.guaranteedEnd;h.guaranteeRange(b,e)}}}else{h.doSort()}return true},prefetch:function(b){var c=this,f=c.getRequestId();c.pendingRequests.push(f);b=Ext.apply({},b);this.storeOptions(b);if(c.sortInfo&&c.remoteSort){var a=c.paramNames;b.params=Ext.apply({},b.params);b.params[a.sort]=c.sortInfo.field;b.params[a.dir]=c.sortInfo.direction;b.params[a.start]=b.start;b.params[a.limit]=b.limit;b.requestId=f}try{if(this.fireEvent("beforeprefetch",this,b)!==false){return this.executePrefetch("read",null,b)}}catch(d){c.handleException(d);return false}},executePrefetch:function(e,a,c,b){if(!Ext.data.Api.isAction(e)){throw new Ext.data.Api.Error("execute",e)}c=Ext.applyIf(c||{},{params:{}});if(b!==undefined){this.addToBatch(b)}var d=true;if(e==="read"){Ext.applyIf(c.params,this.baseParams)}if(d!==false){if(this.writer&&this.proxy.url&&!this.proxy.restful&&!Ext.data.Api.hasUniqueUrl(this.proxy,e)){c.params.xaction=e}this.proxy.request(Ext.data.Api.actions.read,a,c.params,this.reader,this.prefetchRecords,this,c)}return d},onGuaranteedRange:function(){var f=this,c=f.getTotalCount(),g=f.requestStart,b=((c-1)<f.requestEnd)?c-1:f.requestEnd,d=[],a,e=g;b=Math.max(0,b);if(true){f.guaranteedStart=g;f.guaranteedEnd=b;for(;e<=b;e++){a=f.prefetchData.item(e);if(a){d.push(a)}}f.fireEvent("guaranteedrange",d,g,b)}f.unmask()},prefetchRecords:function(g,b,f){var d,a;if(this.isDestroyed===true){return}if(!g||f===false){if(f!==false){this.fireEvent("load",this,[],b)}if(b.callback){b.callback.call(b.scope||this,[],b,false,g)}return}var e=g.records,c=g.totalRecords||e.length;if(!b||b.add!==true){this.cacheRecords(e,b);this.totalLength=c;this.fireEvent("totalcountchange",this.totalLength)}this.pendingRequests.remove(b.requestId);this.fireEvent("load",this,e,b);if(b.callback){b.callback.call(b.scope||this,e,b,true)}},getPages:function(h,c){var f=this,d=f.getPageFromRecordIndex(h),b=f.getPageFromRecordIndex(c),a=f.pageSize||f.defaultPageSize,g=Math.max(d-1,0)*a,e=Math.min(b*a-1,f.getTotalCount())||0;return{first:g,last:b!==0?e:g+a-1}},cacheRecords:function(b,a){var e=this,c=0,d=b.length,f=a?a.start:0;if(!Ext.isDefined(e.totalLength)){e.totalCount=b.length}for(;c<d;c++){b[c].index=f+c}e.prefetchData.clear();e.prefetchData.addAll(b)},guaranteeLoadRecords:function(b,c){var f=this,d=0,e=b.length,g=(c=c||{}).start,a=f.snapshot;if(!c.addRecords){delete f.snapshot;f.clearData(true)}else{if(a){a.addAll(b)}}f.data.addAll(b);if(typeof g!="undefined"){for(;d<e;d++){b[d].index=g+d;b[d].join(f)}}else{for(;d<e;d++){b[d].join(f)}}f.suspendEvents();if(f.filterOnLoad&&!f.remoteFilter){f.filter()}if(f.sortOnLoad&&!f.remoteSort){f.sort()}f.resumeEvents();f.fireEvent("datachanged",f,b);f.fireEvent("refresh",f)},guaranteeRange:function(a,d){if(this.purgePageCount===0){this.unmask();return}d=(d>this.getTotalCount())?this.getTotalCount()-1:d;var g=this,e,h,f,i=g.getTotalCount(),b,c=g.requestStart;g.requestStart=a;g.requestEnd=d;if(g.rangeSatisfied(a,d)){if(a<c){d=Math.min(d+g.numFromEdge,i-1);a=Math.max(d-(g.pageSize-1)-g.numFromEdge,0)}else{a=Math.max(Math.min(a-g.numFromEdge,i-g.pageSize),0);d=Math.max(a+(g.pageSize-1)+g.numFromEdge,d+g.numFromEdge)}g.onGuaranteedRange()}else{}if(!g.rangeSatisfied(a,d)){b=g.getPages(a,d);var j=Ext.apply({},g.lastOptions);j=Ext.apply(j,{start:b.first,limit:b.last-b.first+1,callback:g.onWaitForGuarantee,scope:g});g.prefetch(j)}},hasPendingRequests:function(){return this.pendingRequests.length},onWaitForGuarantee:function(b,a,c){if(!this.hasPendingRequests()){this.onGuaranteedRange()}},getPageFromRecordIndex:function(a){return a<0?0:Math.floor(a/this.pageSize)+1},rangeSatisfied:function(e,a){if(this.purgePageCount===0){return true}var c=this,b=Math.max(0,e),d=true;a=Math.min(a,c.getTotalCount());if(e===a){return Ext.isDefined(c.prefetchData.item(b))}else{if(a<e){return false}}for(;b<a;b++){if(!c.prefetchData.key(b)){d=false;break}}return d},mask:function(a){this.masked=true;this.fireEvent("beforeload",this,a)},unmask:function(){if(this.masked){this.fireEvent("load",this)}}});Ext.namespace("SYNO");SYNO.TextFilter=Ext.extend(Ext.form.TriggerField,{ctCls:"syno-textfilter",cls:"syno-textfilter-text",triggerConfig:{tag:"div",cls:"x-form-trigger syno-textfilter-trigger"},enableKeyEvents:true,listeners:{keyup:{fn:function(b,a){b.trigger.setVisible((b.getValue()!==""))}},render:{fn:function(a){a.trigger.hide()}}},queryDelay:500,queryAction:"find",enumAction:"enum",queryParam:"query",localFilter:false,localFilterField:"",pageSize:20,constructor:function(a){SYNO.TextFilter.superclass.constructor.call(this,a);if(this.store&&!this.localFilter){this.mon(this.store,"beforeload",this.onBeforeLoad,this)}if(this.store&&this.localFilter===true){this.mon(this.store,"load",this.reset,this)}},initEvents:function(){SYNO.TextFilter.superclass.initEvents.call(this);this.mon(this.el,"keyup",this.filter,this,{buffer:this.queryDelay})},setPageSize:function(a){this.pageSize=a},onBeforeLoad:function(a,b){var c=this.getValue();if(c){b.params[this.queryParam]=c;b.params.action=this.queryAction}else{b.params.action=this.enumAction}return true},filter:function(){var b=this.getValue();var a;if(!this.store){return}if(this.localFilter===true){if(b){this.store.filter(this.localFilterField,b,true)}else{this.store.clearFilter(false)}return}a={start:0,limit:this.pageSize};if(b){a.action=this.queryAction;a[this.queryParam]=b;this.store.load({params:a})}else{a.action=this.enumAction;this.store.load({params:a})}},reset:function(){SYNO.TextFilter.superclass.reset.call(this);if(this.localFilterField===false&&this.store){this.store.clearFilter(false);this.trigger.hide()}},onTriggerClick:function(){if(this.getValue()){this.setValue("");this.trigger.hide();this.filter()}}});Ext.ns("SYNO");SYNO.TriCheckbox=function(a){SYNO.TriCheckbox.superclass.constructor.call(this,a)};Ext.extend(SYNO.TriCheckbox,Ext.form.Checkbox,{checkboxCls:"x-checkbox",triMode:true,values:[null,false,true],checkedCls:["x-checkbox-grayed",null,"x-checkbox-checked"],overClass:"x-checkbox-over",clickClass:"x-checkbox-down",defaultAutoCreate:{tag:"input",type:"hidden",autocomplete:"off"},onRender:function(b,a){Ext.form.Checkbox.superclass.onRender.call(this,b,a);if(this.inputValue!==undefined){this.el.dom.value=this.inputValue}this.wrap=this.el.wrap({cls:"x-form-check-wrap"});if(this.boxLabel){this.wrap.createChild({tag:"label",htmlFor:this.el.id,cls:"x-form-cb-label",html:this.boxLabel})}if(this.clickClass&&!this.disabled&&!this.readOnly){this.wrap.addClassOnClick(this.clickClass)}if(this.overClass&&!this.disabled&&!this.readOnly){this.wrap.addClassOnOver(this.overClass)}this.checkbox=this.wrap.createChild({tag:"img",src:Ext.BLANK_IMAGE_URL,cls:this.checkboxCls},this.el);if(Ext.isIE){this.wrap.repaint()}this.resizeEl=this.positionEl=this.wrap},initValue:function(){if((typeof this.value=="object"&&this.value===null)||this.value===true){this.setValue(this.value)}else{this.setValue(false)}this.originalValue=this.getValue();if(this.overCls!==undefined){this.overClass=this.overCls;delete this.overCls}},onResize:function(){Ext.form.Checkbox.superclass.onResize.apply(this,arguments);if(!this.boxLabel&&!this.fieldLabel&&this.checkbox){this.checkbox.alignTo(this.wrap,"c-c")}},afterRender:function(){Ext.form.Checkbox.superclass.afterRender.call(this)},getCheckIndex:function(){for(var a=0;a<this.values.length;a++){if(this.value===this.values[a]){if(!this.triMode&&a===0){return(a+1)}return a}}return 0},updateCheckCls:function(){if(!this.wrap){return}var a=this.checkedCls[this.getCheckIndex()];this.wrap.replaceClass(this._checkCls,a);this._checkCls=a},getValue:function(){return Ext.form.Checkbox.superclass.getValue.call(this)},initEvents:function(){Ext.form.Checkbox.superclass.initEvents.call(this);this.mon(this.wrap,{scope:this,click:this.onClick})},onClick:function(){if(!this.disabled&&!this.readOnly){this.setValue(this.values[(this.getCheckIndex()+1)%this.values.length])}},setValue:function(a){Ext.form.Checkbox.superclass.setValue.call(this,a);this.updateCheckCls();this.fireEvent("check",this,this.value);if(this.handler){this.handler.call(this.scope||this,this,this.value)}return this},setTriMode:function(a){this.triMode=a}});Ext.reg("tricheckbox",SYNO.TriCheckbox);Ext.tree.TriTreeNodeUI=function(){Ext.tree.TriTreeNodeUI.superclass.constructor.apply(this,arguments)};Ext.tree.TriTreeNodeUI.CHECKSTATE=2;Ext.tree.TriTreeNodeUI.UNCHECKSTATE=1;Ext.tree.TriTreeNodeUI.GRAYSTATE=0;Ext.extend(Ext.tree.TriTreeNodeUI,Ext.tree.TreeNodeUI,{values:[null,false,true],checkedCls:["x-checkbox-grayed",null,"x-checkbox-checked"],checkboxCls:"x-checkbox",expanded:false,err:-1,initEvents:function(){Ext.tree.TriTreeNodeUI.superclass.initEvents.apply(this,arguments);if(this.checkbox){Ext.EventManager.on(this.checkbox,"click",this.toggleCheck,this)}},destroy:function(){if(this.checkbox){Ext.EventManager.un(this.checkbox,"click",this.toggleCheck,this)}Ext.tree.TriTreeNodeUI.superclass.destroy.apply(this,arguments)},getCheckIndex:function(b){for(var a=0;a<this.values.length;a++){if(b.getUI()&&b.getUI().checkbox&&b.getUI().checkbox.checked===this.values[a]){return a}}return this.err},clearCheck:function(){if(true===this.node.disabled){return}this.onCheckChange(Ext.tree.TriTreeNodeUI.UNCHECKSTATE)},onCheckChange:function(a){this.checkbox.checked=this.values[a];this.checkbox.className=this.checkedCls[a];if(this.node.firstChild){this.updateChild(this.node.firstChild,a)}if(this.node.parentNode!=this.root){this.updateParent(this.node.parentNode,a)}var b=this.checkbox.checked;this.node.attributes.checked=b;this.fireEvent("checkchange",this.node,b)},toggleCheck:function(){if(true===this.node.disabled){return}var a=this.getCheckIndex(this.node);a=(a===Ext.tree.TriTreeNodeUI.UNCHECKSTATE)?Ext.tree.TriTreeNodeUI.CHECKSTATE:Ext.tree.TriTreeNodeUI.UNCHECKSTATE;this.onCheckChange(a)},updateChild:function(b,a){var c=b;do{if(c.disabled){c=c.nextSibling;continue}if(c.getUI()&&c.getUI().checkbox){c.getUI().checkbox.checked=this.values[a];c.getUI().checkbox.className=this.checkedCls[a]}if(c.firstChild){this.updateChild(c.firstChild,a)}c=c.nextSibling}while(c)},updateParent:function(d,a){var c=this.getCheckIndex(d);if(a!=c){var b=this.checkchildstate(d);if(d.getUI()&&d.getUI().checkbox){d.getUI().checkbox.checked=this.values[b];d.getUI().checkbox.className=this.checkedCls[b]}if(d.parentNode!=this.root){this.updateParent(d.parentNode,b)}}},checkchildstate:function(c){var b=c.firstChild;var a;if(!b){return this.err}while(b){if(Ext.tree.TriTreeNodeUI.UNCHECKSTATE!==this.getCheckIndex(b)){return Ext.tree.TriTreeNodeUI.GRAYSTATE}b=b.nextSibling}return Ext.tree.TriTreeNodeUI.UNCHECKSTATE},renderElements:function(i,c,h,b){this.indentMarkup=i.parentNode?i.parentNode.ui.getChildIndent():"";var g,d=c.href?c.href:Ext.isGecko?"":"#",e=['<li class="x-tree-node"><div ext:tree-node-id="',Ext.util.Format.htmlEncode(i.id),'" class="x-tree-node-el x-tree-node-leaf x-unselectable ',c.cls,'" unselectable="on">','<span class="x-tree-node-indent">',this.indentMarkup,"</span>",'<img alt="" src="',this.emptyIcon,'" class="x-tree-ec-icon x-tree-elbow" />','<img alt="" src="',c.icon||this.emptyIcon,'" class="x-tree-node-icon',(c.icon?" x-tree-node-inline-icon":""),(c.iconCls?" "+c.iconCls:""),'" unselectable="on" />','<span><img alt="" src="'+this.emptyIcon+'" style="margin:0 2px 0 2px;" class="x-checkbox" /></span>','<a hidefocus="on" class="x-tree-node-anchor" href="',d,'" tabIndex="1" ',c.hrefTarget?' target="'+c.hrefTarget+'"':"",'><span unselectable="on">',i.text,"</span></a></div>",'<ul class="x-tree-node-ct" style="display:none;"></ul>',"</li>"].join("");if(b!==true&&i.nextSibling&&(g=i.nextSibling.ui.getEl())){this.wrap=Ext.DomHelper.insertHtml("beforeBegin",g,e)}else{this.wrap=Ext.DomHelper.insertHtml("beforeEnd",h,e)}this.elNode=this.wrap.childNodes[0];this.ctNode=this.wrap.childNodes[1];var f=this.elNode.childNodes;this.indentNode=f[0];this.ecNode=f[1];this.iconNode=f[2];this.checkbox=f[3];if(c.checked==="checked"){this.checkbox.checked=this.values[Ext.tree.TriTreeNodeUI.CHECKSTATE];this.checkbox.className=this.checkedCls[Ext.tree.TriTreeNodeUI.CHECKSTATE]}else{if(c.checked==="gray"){this.checkbox.checked=this.values[Ext.tree.TriTreeNodeUI.GRAYSTATE];this.checkbox.className=this.checkedCls[Ext.tree.TriTreeNodeUI.GRAYSTATE]}else{this.checkbox.checked=this.values[Ext.tree.TriTreeNodeUI.UNCHECKSTATE];this.checkbox.className=this.checkedCls[Ext.tree.TriTreeNodeUI.UNCHECKSTATE]}}this.anchor=f[4];this.textNode=f[4].firstChild}});Ext.namespace("SYNO.Util");SYNO.Util.copy=function(d){var a=[],b=[];return(function(j){var f,e=a.indexOf(j);if(-1!==e){return b[e]}if(Ext.isObject(j)){f={};a.push(j);b.push(f);for(var h in j){f[h]=arguments.callee(j[h])}}else{if(Ext.isArray(j)){f=[];a.push(j);b.push(f);for(var g=0;g<j.length;++g){f[g]=arguments.callee(j[g])}}else{f=j}}return f})(d)};SYNO.Util.copyApply=function(d,e,b){if(b){arguments.callee(d,b)}if(d&&e&&typeof e=="object"){for(var a in e){d[a]=SYNO.Util.copy(e[a])}}return d};SYNO=window.SYNO||{};SYNO.Encryption=SYNO.Encryption||{};SYNO.Encryption.Base64=(function(){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var a="=";return{hex2b64:function(f){var e;var g;var d="";for(e=0;e+3<=f.length;e+=3){g=parseInt(f.substring(e,e+3),16);d+=b.charAt(g>>6)+b.charAt(g&63)}if(e+1==f.length){g=parseInt(f.substring(e,e+1),16);d+=b.charAt(g<<2)}else{if(e+2==f.length){g=parseInt(f.substring(e,e+2),16);d+=b.charAt(g>>2)+b.charAt((g&3)<<4)}}while((d.length&3)>0){d+=a}return d},b64tohex:function(g){var e="";var f;var c=0;var d;for(f=0;f<g.length;++f){if(g.charAt(f)==a){break}v=b.indexOf(g.charAt(f));if(v<0){continue}if(c==0){e+=int2char(v>>2);d=v&3;c=1}else{if(c==1){e+=int2char((d<<2)|(v>>4));d=v&15;c=2}else{if(c==2){e+=int2char(d);e+=int2char(v>>2);d=v&3;c=3}else{e+=int2char((d<<2)|(v>>4));e+=int2char(v&15);c=0}}}}if(c==1){e+=int2char(d<<2)}return e},b64toBA:function(f){var e=b64tohex(f);var d;var c=new Array();for(d=0;2*d<e.length;++d){c[d]=parseInt(e.substring(2*d,2*d+2),16)}return c}}})();SYNO=window.SYNO||{};SYNO.Encryption=SYNO.Encryption||{};SYNO.Encryption.BigInteger=(function(){var H;var Z=244837814094590;var f=((Z&16777215)==15715070);function d(ab,aa,ac){if(ab!=null){if("number"==typeof ab){this.fromNumber(ab,aa,ac)}else{if(aa==null&&"string"!=typeof ab){this.fromString(ab,256)}else{this.fromString(ab,aa)}}}}function l(){return new d(null)}function L(ae,aa,ab,ad,ag,af){while(--af>=0){var ac=aa*this[ae++]+ab[ad]+ag;ag=Math.floor(ac/67108864);ab[ad++]=ac&67108863}return ag}function K(ae,aj,ak,ad,ah,aa){var ag=aj&32767,ai=aj>>15;while(--aa>=0){var ac=this[ae]&32767;var af=this[ae++]>>15;var ab=ai*ac+af*ag;ac=ag*ac+((ab&32767)<<15)+ak[ad]+(ah&1073741823);ah=(ac>>>30)+(ab>>>15)+ai*af+(ah>>>30);ak[ad++]=ac&1073741823}return ah}function J(ae,aj,ak,ad,ah,aa){var ag=aj&16383,ai=aj>>14;while(--aa>=0){var ac=this[ae]&16383;var af=this[ae++]>>14;var ab=ai*ac+af*ag;ac=ag*ac+((ab&16383)<<14)+ak[ad]+ah;ah=(ac>>28)+(ab>>14)+ai*af;ak[ad++]=ac&268435455}return ah}if(f&&(navigator.appName=="Microsoft Internet Explorer")){d.prototype.am=K;H=30}else{if(f&&(navigator.appName!="Netscape")){d.prototype.am=L;H=26}else{d.prototype.am=J;H=28}}d.prototype.DB=H;d.prototype.DM=((1<<H)-1);d.prototype.DV=(1<<H);var m=52;d.prototype.FV=Math.pow(2,m);d.prototype.F1=m-H;d.prototype.F2=2*H-m;var t="0123456789abcdefghijklmnopqrstuvwxyz";var y=new Array();var E,o;E="0".charCodeAt(0);for(o=0;o<=9;++o){y[E++]=o}E="a".charCodeAt(0);for(o=10;o<36;++o){y[E++]=o}E="A".charCodeAt(0);for(o=10;o<36;++o){y[E++]=o}function x(aa){return t.charAt(aa)}function C(ab,aa){var ac=y[ab.charCodeAt(aa)];return(ac==null)?-1:ac}function n(ab){for(var aa=this.t-1;aa>=0;--aa){ab[aa]=this[aa]}ab.t=this.t;ab.s=this.s}function R(aa){this.t=1;this.s=(aa<0)?-1:0;if(aa>0){this[0]=aa}else{if(aa<-1){this[0]=aa+DV}else{this.t=0}}}function b(aa){var ab=l();ab.fromInt(aa);return ab}function M(ag,ab){var ad;if(ab==16){ad=4}else{if(ab==8){ad=3}else{if(ab==256){ad=8}else{if(ab==2){ad=1}else{if(ab==32){ad=5}else{if(ab==4){ad=2}else{this.fromRadix(ag,ab);return}}}}}}this.t=0;this.s=0;var af=ag.length,ac=false,ae=0;while(--af>=0){var aa=(ad==8)?ag[af]&255:C(ag,af);if(aa<0){if(ag.charAt(af)=="-"){ac=true}continue}ac=false;if(ae==0){this[this.t++]=aa}else{if(ae+ad>this.DB){this[this.t-1]|=(aa&((1<<(this.DB-ae))-1))<<ae;this[this.t++]=(aa>>(this.DB-ae))}else{this[this.t-1]|=aa<<ae}}ae+=ad;if(ae>=this.DB){ae-=this.DB}}if(ad==8&&(ag[0]&128)!=0){this.s=-1;if(ae>0){this[this.t-1]|=((1<<(this.DB-ae))-1)<<ae}}this.clamp();if(ac){d.ZERO.subTo(this,this)}}function P(){var aa=this.s&this.DM;while(this.t>0&&this[this.t-1]==aa){--this.t}}function T(ab){if(this.s<0){return"-"+this.negate().toString(ab)}var ac;if(ab==16){ac=4}else{if(ab==8){ac=3}else{if(ab==2){ac=1}else{if(ab==32){ac=5}else{if(ab==4){ac=2}else{return this.toRadix(ab)}}}}}var ae=(1<<ac)-1,ah,aa=false,af="",ad=this.t;var ag=this.DB-(ad*this.DB)%ac;if(ad-->0){if(ag<this.DB&&(ah=this[ad]>>ag)>0){aa=true;af=x(ah)}while(ad>=0){if(ag<ac){ah=(this[ad]&((1<<ag)-1))<<(ac-ag);ah|=this[--ad]>>(ag+=this.DB-ac)}else{ah=(this[ad]>>(ag-=ac))&ae;if(ag<=0){ag+=this.DB;--ad}}if(ah>0){aa=true}if(aa){af+=x(ah)}}}return aa?af:"0"}function N(){var aa=l();d.ZERO.subTo(this,aa);return aa}function G(){return(this.s<0)?this.negate():this}function V(aa){var ac=this.s-aa.s;if(ac!=0){return ac}var ab=this.t;ac=ab-aa.t;if(ac!=0){return ac}while(--ab>=0){if((ac=this[ab]-aa[ab])!=0){return ac}}return 0}function U(aa){var ac=1,ab;if((ab=aa>>>16)!=0){aa=ab;ac+=16}if((ab=aa>>8)!=0){aa=ab;ac+=8}if((ab=aa>>4)!=0){aa=ab;ac+=4}if((ab=aa>>2)!=0){aa=ab;ac+=2}if((ab=aa>>1)!=0){aa=ab;ac+=1}return ac}function g(){if(this.t<=0){return 0}return this.DB*(this.t-1)+U(this[this.t-1]^(this.s&this.DM))}function a(ac,ab){var aa;for(aa=this.t-1;aa>=0;--aa){ab[aa+ac]=this[aa]}for(aa=ac-1;aa>=0;--aa){ab[aa]=0}ab.t=this.t+ac;ab.s=this.s}function z(ac,ab){for(var aa=ac;aa<this.t;++aa){ab[aa-ac]=this[aa]}ab.t=Math.max(this.t-ac,0);ab.s=this.s}function s(ah,ad){var ab=ah%this.DB;var aa=this.DB-ab;var af=(1<<aa)-1;var ae=Math.floor(ah/this.DB),ag=(this.s<<ab)&this.DM,ac;for(ac=this.t-1;ac>=0;--ac){ad[ac+ae+1]=(this[ac]>>aa)|ag;ag=(this[ac]&af)<<ab}for(ac=ae-1;ac>=0;--ac){ad[ac]=0}ad[ae]=ag;ad.t=this.t+ae+1;ad.s=this.s;ad.clamp()}function Q(ag,ad){ad.s=this.s;var ae=Math.floor(ag/this.DB);if(ae>=this.t){ad.t=0;return}var ab=ag%this.DB;var aa=this.DB-ab;var af=(1<<ab)-1;ad[0]=this[ae]>>ab;for(var ac=ae+1;ac<this.t;++ac){ad[ac-ae-1]|=(this[ac]&af)<<aa;ad[ac-ae]=this[ac]>>ab}if(ab>0){ad[this.t-ae-1]|=(this.s&af)<<aa}ad.t=this.t-ae;ad.clamp()}function h(ab,ad){var ac=0,ae=0,aa=Math.min(ab.t,this.t);while(ac<aa){ae+=this[ac]-ab[ac];ad[ac++]=ae&this.DM;ae>>=this.DB}if(ab.t<this.t){ae-=ab.s;while(ac<this.t){ae+=this[ac];ad[ac++]=ae&this.DM;ae>>=this.DB}ae+=this.s}else{ae+=this.s;while(ac<ab.t){ae-=ab[ac];ad[ac++]=ae&this.DM;ae>>=this.DB}ae-=ab.s}ad.s=(ae<0)?-1:0;if(ae<-1){ad[ac++]=this.DV+ae}else{if(ae>0){ad[ac++]=ae}}ad.t=ac;ad.clamp()}function O(ab,ad){var aa=this.abs(),ae=ab.abs();var ac=aa.t;ad.t=ac+ae.t;while(--ac>=0){ad[ac]=0}for(ac=0;ac<ae.t;++ac){ad[ac+aa.t]=aa.am(0,ae[ac],ad,ac,0,aa.t)}ad.s=0;ad.clamp();if(this.s!=ab.s){d.ZERO.subTo(ad,ad)}}function A(ac){var ab,aa=this.abs();ab=ac.t=2*aa.t;while(--ab>=0){ac[ab]=0}for(ab=0;ab<aa.t-1;++ab){var ad=aa.am(ab,aa[ab],ac,2*ab,0,1);if((ac[ab+aa.t]+=aa.am(ab+1,2*aa[ab],ac,2*ab+1,ad,aa.t-ab-1))>=aa.DV){ac[ab+aa.t]-=aa.DV;ac[ab+aa.t+1]=1}}if(ac.t>0){ac[ac.t-1]+=aa.am(ab,aa[ab],ac,2*ab,0,1)}ac.s=0;ac.clamp()}function I(aj,ag,af){var ap=aj.abs();if(ap.t<=0){return}var ah=this.abs();if(ah.t<ap.t){if(ag!=null){ag.fromInt(0)}if(af!=null){this.copyTo(af)}return}if(af==null){af=l()}var ad=l(),aa=this.s,ai=aj.s;var ao=this.DB-U(ap[ap.t-1]);if(ao>0){ap.lShiftTo(ao,ad);ah.lShiftTo(ao,af)}else{ap.copyTo(ad);ah.copyTo(af)}var al=ad.t;var ab=ad[al-1];if(ab==0){return}var ak=ab*(1<<this.F1)+((al>1)?ad[al-2]>>this.F2:0);var at=this.FV/ak,ar=(1<<this.F1)/ak,aq=1<<this.F2;var an=af.t,am=an-al,ae=(ag==null)?l():ag;ad.dlShiftTo(am,ae);if(af.compareTo(ae)>=0){af[af.t++]=1;af.subTo(ae,af)}d.ONE.dlShiftTo(al,ae);ae.subTo(ad,ad);while(ad.t<al){ad[ad.t++]=0}while(--am>=0){var ac=(af[--an]==ab)?this.DM:Math.floor(af[an]*at+(af[an-1]+aq)*ar);if((af[an]+=ad.am(0,ac,af,am,0,al))<ac){ad.dlShiftTo(am,ae);af.subTo(ae,af);while(af[an]<--ac){af.subTo(ae,af)}}}if(ag!=null){af.drShiftTo(al,ag);if(aa!=ai){d.ZERO.subTo(ag,ag)}}af.t=al;af.clamp();if(ao>0){af.rShiftTo(ao,af)}if(aa<0){d.ZERO.subTo(af,af)}}function j(aa){var ab=l();this.abs().divRemTo(aa,null,ab);if(this.s<0&&ab.compareTo(d.ZERO)>0){aa.subTo(ab,ab)}return ab}function W(aa){this.m=aa}function w(aa){if(aa.s<0||aa.compareTo(this.m)>=0){return aa.mod(this.m)}else{return aa}}function p(aa){return aa}function c(aa){aa.divRemTo(this.m,null,aa)}function X(aa,ac,ab){aa.multiplyTo(ac,ab);this.reduce(ab)}function Y(aa,ab){aa.squareTo(ab);this.reduce(ab)}W.prototype.convert=w;W.prototype.revert=p;W.prototype.reduce=c;W.prototype.mulTo=X;W.prototype.sqrTo=Y;function r(){if(this.t<1){return 0}var aa=this[0];if((aa&1)==0){return 0}var ab=aa&3;ab=(ab*(2-(aa&15)*ab))&15;ab=(ab*(2-(aa&255)*ab))&255;ab=(ab*(2-(((aa&65535)*ab)&65535)))&65535;ab=(ab*(2-aa*ab%this.DV))%this.DV;return(ab>0)?this.DV-ab:-ab}function B(aa){this.m=aa;this.mp=aa.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<(aa.DB-15))-1;this.mt2=2*aa.t}function q(aa){var ab=l();aa.abs().dlShiftTo(this.m.t,ab);ab.divRemTo(this.m,null,ab);if(aa.s<0&&ab.compareTo(d.ZERO)>0){this.m.subTo(ab,ab)}return ab}function S(aa){var ab=l();aa.copyTo(ab);this.reduce(ab);return ab}function F(aa){while(aa.t<=this.mt2){aa[aa.t++]=0}for(var ac=0;ac<this.m.t;++ac){var ab=aa[ac]&32767;var ad=(ab*this.mpl+(((ab*this.mph+(aa[ac]>>15)*this.mpl)&this.um)<<15))&aa.DM;ab=ac+this.m.t;aa[ab]+=this.m.am(0,ad,aa,ac,0,this.m.t);while(aa[ab]>=aa.DV){aa[ab]-=aa.DV;aa[++ab]++}}aa.clamp();aa.drShiftTo(this.m.t,aa);if(aa.compareTo(this.m)>=0){aa.subTo(this.m,aa)}}function k(aa,ab){aa.squareTo(ab);this.reduce(ab)}function i(aa,ac,ab){aa.multiplyTo(ac,ab);this.reduce(ab)}B.prototype.convert=q;B.prototype.revert=S;B.prototype.reduce=F;B.prototype.mulTo=i;B.prototype.sqrTo=k;function u(){return 0==((this.t>0)?(this[0]&1):this.s)}function e(af,ag){if(af>4294967295||af<1){return d.ONE}var ae=l(),aa=l(),ad=ag.convert(this),ac=U(af)-1;ad.copyTo(ae);while(--ac>=0){ag.sqrTo(ae,aa);if((af&(1<<ac))>0){ag.mulTo(aa,ad,ae)}else{var ab=ae;ae=aa;aa=ab}}return ag.revert(ae)}function D(ab,aa){var ac;if(ab<256||aa.isEven()){ac=new W(aa)}else{ac=new B(aa)}return this.exp(ab,ac)}d.prototype.copyTo=n;d.prototype.fromInt=R;d.prototype.fromString=M;d.prototype.clamp=P;d.prototype.dlShiftTo=a;d.prototype.drShiftTo=z;d.prototype.lShiftTo=s;d.prototype.rShiftTo=Q;d.prototype.subTo=h;d.prototype.multiplyTo=O;d.prototype.squareTo=A;d.prototype.divRemTo=I;d.prototype.invDigit=r;d.prototype.isEven=u;d.prototype.exp=e;d.prototype.toString=T;d.prototype.negate=N;d.prototype.abs=G;d.prototype.compareTo=V;d.prototype.bitLength=g;d.prototype.mod=j;d.prototype.modPowInt=D;d.ZERO=b(0);d.ONE=b(1);return d})();SYNO=window.SYNO||{};SYNO.Encryption=SYNO.Encryption||{};SYNO.Encryption.SecureRandom=(function(){function g(){this.i=0;this.j=0;this.S=new Array()}function l(s){var r,p,q;for(r=0;r<256;++r){this.S[r]=r}p=0;for(r=0;r<256;++r){p=(p+this.S[r]+s[r%s.length])&255;q=this.S[r];this.S[r]=this.S[p];this.S[p]=q}this.i=0;this.j=0}function d(){var p;this.i=(this.i+1)&255;this.j=(this.j+this.S[this.i])&255;p=this.S[this.i];this.S[this.i]=this.S[this.j];this.S[this.j]=p;return this.S[(p+this.S[this.i])&255]}g.prototype.init=l;g.prototype.next=d;function j(){return new g()}var m=256;var k;var b;var f;function h(p){b[f++]^=p&255;b[f++]^=(p>>8)&255;b[f++]^=(p>>16)&255;b[f++]^=(p>>24)&255;if(f>=m){f-=m}}function o(){h(new Date().getTime())}if(b==null){b=new Array();f=0;var n;if(navigator.appName=="Netscape"&&navigator.appVersion<"5"&&window.crypto){var i=window.crypto.random(32);for(n=0;n<i.length;++n){b[f++]=i.charCodeAt(n)&255}}while(f<m){n=Math.floor(65536*Math.random());b[f++]=n>>>8;b[f++]=n&255}f=0;o()}function c(){if(k==null){o();k=j();k.init(b);for(f=0;f<b.length;++f){b[f]=0}f=0}return k.next()}function e(q){var p;for(p=0;p<q.length;++p){q[p]=c()}}function a(){}a.prototype.nextBytes=e;a.rng_seed_time=o;return a})();SYNO=window.SYNO||{};SYNO.Encryption=SYNO.Encryption||{};SYNO.Encryption.RSA=(function(){function c(i,h){return new SYNO.Encryption.BigInteger(i,h)}function b(h){if(h<16){return"0"+h.toString(16)}return h.toString(16)}function a(l,p){if(p<l.length+11){return null}var o=new Array();var k=l.length-1;while(k>=0&&p>0){var m=l.charCodeAt(k--);if(m<128){o[--p]=m}else{if((m>127)&&(m<2048)){o[--p]=(m&63)|128;o[--p]=(m>>6)|192}else{o[--p]=(m&63)|128;o[--p]=((m>>6)&63)|128;o[--p]=(m>>12)|224}}}o[--p]=0;var j=new SYNO.Encryption.SecureRandom();var h=new Array();while(p>2){h[0]=0;while(h[0]==0){j.nextBytes(h)}o[--p]=h[0]}o[--p]=2;o[--p]=0;return new SYNO.Encryption.BigInteger(o)}function e(){this.n=null;this.e=0;this.d=null;this.p=null;this.q=null;this.dmp1=null;this.dmq1=null;this.coeff=null}function f(i,h){if(i!=null&&h!=null&&i.length>0&&h.length>0){this.n=c(i,16);this.e=parseInt(h,16)}else{}}function g(h){return h.modPowInt(this.e,this.n)}function d(k){var i=a(k,(this.n.bitLength()+7)>>3);if(i==null){return null}var l=this.doPublic(i);if(l==null){return null}var j=l.toString(16);if((j.length&1)==0){return j}else{return"0"+j}}e.prototype.doPublic=g;e.prototype.setPublic=f;e.prototype.encrypt=d;return e})();SYNO=window.SYNO||{};SYNO.Encryption=SYNO.Encryption||{};SYNO.Encryption.CipherKey="";SYNO.Encryption.RSAModulus="";SYNO.Encryption.CipherToken="";SYNO.Encryption.TimeBias=0;SYNO.Encryption.EncryptParam=function(e){var c,d,b={},a={};if(!SYNO.Encryption.CipherKey||!SYNO.Encryption.RSAModulus||!SYNO.Encryption.CipherToken){return e}c=new SYNO.Encryption.RSA();c.setPublic(SYNO.Encryption.RSAModulus,"10001");Ext.apply(b,e);b[SYNO.Encryption.CipherToken]=Math.floor(+new Date()/1000)+SYNO.Encryption.TimeBias;d=c.encrypt(Ext.urlEncode(b));if(!d){return e}a[SYNO.Encryption.CipherKey]=SYNO.Encryption.Base64.hex2b64(d);return a};